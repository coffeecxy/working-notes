
docker中的网络设置
===

docker中可以开启很多的容器,这些容器就相当于使用virtualBox的时候运行的很多个虚拟机.
使用virtualBox的时候,我们可以对虚拟机的网络进行各种各样的设置,在docker中,也可以实现其中的大部分功能.

![docker的典型网络环境](docker-net.svg)

上图为一个典型的dockerw网络环境.

在我们的本机上面,有一个物理的网卡,其为`eth0`,其IP为`192.168.0.128/24`,这是因为我们的主机在一个局域网内.实际上,我们可以认为我们的主机在公网中,也就是有一个公网的IP.

docker0这个这个interface是一个虚拟的,因为物理硬件上面并没有这个.在virtualBox中,其也会使用一个虚拟的网络设备.这个网络设备的IP为`172.17.42.1/16`. 可以看到,其和eth0并不在一个网段内,但是因为它们都在同一个主机上面,所以它们之间的包是可以forward的.

当我们使用`docker run`运行了几个容器之后,每一个容器中都会有一个eth网络设备. 在我们的列子中,有三个容器在运行,可以看到,这三个容器的网络地址都是在同一个网段内的,而且和docker0也是在同一个网段中的. 通过查看它们的route,会发现它们的gateway就是docker0.
